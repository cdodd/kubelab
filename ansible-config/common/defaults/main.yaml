################################################################################
# Kubernetes & container runtime versions
################################################################################

kubernetes_version: "1.27.4-00"

cni_plugins_version: "1.3.0"

containerd_version: "1.7.3"

runc_version: "1.1.8"

################################################################################
# Package Settings
################################################################################

upgrade_packages: false

package_cache_valid_time: 600

package_keys:
- key: https://packages.cloud.google.com/apt/doc/apt-key.gpg

package_repositories:
- repo: "deb https://apt.kubernetes.io/ kubernetes-xenial main" # kubernetes-xenial is the latest available as of 2023-07-22

general_package_names:
- name: apt-transport-https
- name: cri-tools # for crictl
- name: etcd-client
- name: net-tools
- name: jq

# The installation order of these packages is important when version pinning,
# which this playbook does based on the "kubernetes_version" variable.
#
# kubeadm will install kubelet and kubectl, but will install the latest
# versions, even if an older version of kubeadm is being installed. Install the
# packages in the below order to get a clean install with all tools using the
# specified version.
kubernetes_package_names:
- name: kubectl
- name: kubelet
- name: kubeadm

################################################################################
# Kernel Modules and Parameters
################################################################################

kernel_modules:
  - name: overlay
  - name: br_netfilter

kernel_parameters:
  - name: net.bridge.bridge-nf-call-iptables
    value: 1
  - name: net.bridge.bridge-nf-call-ip6tables
    value: 1
  - name: net.ipv4.ip_forward
    value: 1
